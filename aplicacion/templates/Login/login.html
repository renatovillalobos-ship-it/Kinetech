{% load static %}
<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="{% static 'css/login.css' %}">
    <!-- CORREGIDO: Agregar los 3 pesos de la fuente -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- NUEVO: Estilos para aplicar los pesos correctamente -->
    <style>
        body, h1, h2, h3, h4, h5, h6, p, input, button, textarea, select, a, span, div {
            font-family: 'Source Sans Pro', sans-serif;
        }
        
        /* T√çTULOS: Bold (700) */
        h1, h2, h3, .form_title, .title, .switch__title, h4 {
            font-weight: 700;
        }
        
        /* SUBT√çTULOS: Semibold (600) */
        .switch__description, .form__checkbox-label, label, .text-muted, small {
            font-weight: 600;
        }
        
        /* CONTENIDO: Regular (400) */
        body, p, input, .form__input, .description, .politicas-texto, ul, li {
            font-weight: 400;
        }
    </style>
</head>

<body>

<!-- Toggle modo oscuro mejorado -->
<div class="theme-toggle-container">
    <span class="theme-label"></span>
    <label class="theme-switch">
        <input type="checkbox" id="theme-toggle">
        <span class="slider">
            <span class="slider-icon sun">‚òÄÔ∏è</span>
            <span class="slider-icon moon">üåô</span>
        </span>
    </label>
</div>

<div class="main">

    <!-- CONTENEDOR REGISTRO -->
    <div class="container a-container" id="a-container">

        <!-- FORMULARIO DOCENTE -->
        <form class="form" id="docente-form" method="POST" action="{% url 'docente:registro_docente' %}">
            {% csrf_token %}

            <h2 class="form_title title">Crear cuenta</h2>

            <!-- Mensajes -->
            <div id="messages-container-docente">
                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li class="alert alert-{{ message.tags }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <!-- Selecci√≥n de rol -->
            <div class="role-selector">
                <button type="button" class="role-btn is-active docente-btn">Docente</button>
                <button type="button" class="role-btn estudiante-btn">Estudiante</button>
            </div>

            <!-- CAMPOS DOCENTE -->
            <input class="form__input" type="text" name="nombre_doc" placeholder="Nombre*" required>
            <input class="form__input" type="text" name="apellido_doc" placeholder="Apellido*" required>
            <input class="form__input" type="email" name="correo_doc" placeholder="Correo electr√≥nico*" required>
            <select class="form__input" name="asigna_doc" required>
                <option value="">Seleccione asignatura*</option>
                    {% for a in asignaturas %}
                        <option value="{{ a }}">{{ a }}</option>
                    {% endfor %}
                </select>
            </select>


            <!-- Pa√≠s -->
            <select class="form__input" name="pais_doc" required>
                <option value="">Selecciona tu pa√≠s</option>
                <option value="CL">Chile</option>
                <option value="AR">Argentina</option>
                <option value="PE">Per√∫</option>
                <option value="BR">Brasil</option>
                <option value="OTRO">Otro</option>
            </select>

            <input class="form__input" type="password" name="password_doc" placeholder="Contrase√±a*" required>
            
            <!-- ACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA -->
            <div class="form__checkbox-label mb-3">
                <input type="checkbox" name="acepto_privacidad" required>
                <span>
                    Acepto las <a href="#politicas" style="color: #AC6D33;">Pol√≠ticas de Privacidad</a>
                </span>
            </div>
            <!-- ACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA -->


            <button class="form__button button submit" type="submit">CREAR CUENTA</button>
        </form>

        <!-- FORMULARIO ESTUDIANTE -->
        <form class="form" id="estudiante-form" method="POST" action="{% url 'estudiante:registro_estudiante' %}" style="display:none;">
            {% csrf_token %}

            <h2 class="form_title title">Crear cuenta</h2>

            <!-- Mensajes -->
            <div id="messages-container-estudiante">
                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li class="alert alert-{{ message.tags }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <!-- Selecci√≥n de rol -->
            <div class="role-selector">
                <button type="button" class="role-btn docente-btn">Docente</button>
                <button type="button" class="role-btn is-active estudiante-btn">Estudiante</button>
            </div>

            <!-- CAMPOS ESTUDIANTE -->
            <input class="form__input" type="text" name="nombre_est" placeholder="Nombre*" required>
            <input class="form__input" type="text" name="apellido_est" placeholder="Apellido*" required>
            <input class="form__input" type="email" name="correo_est" placeholder="Correo electr√≥nico*" required>

            <!-- Pa√≠s -->
            <select class="form__input" name="pais_est" required>
                <option value="">Selecciona tu pa√≠s</option>
                <option value="CL">Chile</option>
                <option value="AR">Argentina</option>
                <option value="PE">Per√∫</option>
                <option value="BR">Brasil</option>
                <option value="OTRO">Otro</option>
            </select>

            <input class="form__input" type="password" name="password_est" placeholder="Contrase√±a*" required>

             <!-- ACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA -->
            <div class="form__checkbox-label mb-3">
                <input type="checkbox" name="acepto_privacidad" required>
                <span>
                    Acepto las <a href="#politicas" style="color: #AC6D33;">Pol√≠ticas de Privacidad</a>
                </span>
            </div>
            <!-- este parrafito -->

            <button class="form__button button submit" type="submit">CREAR CUENTA</button>
        </form>

    </div>

    <!-- CONTENEDOR LOGIN -->
    <div class="container b-container" id="b-container">

        <form class="form" id="b-form" method="POST" action="{% url 'docente:autenticar' %}">
            {% csrf_token %}

            <h2 class="form_title title">Iniciar sesi√≥n</h2>
           
            <!-- -------- -->
            <div class="form__messages"></div>
            <!-- -------- -->

            <input class="form__input" type="text" placeholder="Correo electr√≥nico" name="correo" required>
            <input class="form__input" type="password" placeholder="Contrase√±a" name="contrasena" required>

            <label class="form__checkbox-label">
                <input type="checkbox" name="remember_me" class="form__checkbox">
                Recordarme en este dispositivo
            </label>
            
            <!--ACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA-->
            <div class="text-center mt-4">
                <small class="text-muted">
                    Al iniciar sesi√≥n, aceptas nuestras 
                    <a href="#politicas" style="color: #AC6D33;">Pol√≠ticas de Privacidad</a>
                </small>
            </div>
            <!-- -------- -->

            <button class="form__button button submit">INGRESAR</button>

            <!-- <a class="form__link" href="#">Olvid√© mi contrase√±a</a> -->
            
            <!-- -------- -->
            <a class="form__link" href="{% url 'reset_password' %}">Olvid√© mi contrase√±a</a>  <!-- ‚Üê CAMBIADO: ahora apunta a reset_password -->
            <!-- -------- -->
        
        </form>

    </div>

    <!-- SWITCH -->
    <div class="switch" id="switch-cnt">
        <div class="switch__circle"></div>
        <div class="switch__circle switch__circle--t"></div>

        <div class="switch__container" id="switch-c1">
            <img src="{% static 'img/logo_ucn.jpg' %}" class="logo-ucn">
            <h2 class="switch__title title">Acceder</h2>
            <button class="switch__button button switch-btn">INICIAR SESI√ìN</button>
        </div>

        <div class="switch__container is-hidden" id="switch-c2">
            <img src="{% static 'img/logo_ucn.jpg' %}" class="logo-ucn">
            <h2 class="switch__title title">¬°BIENVENIDO!</h2>
            <p class="switch__description description">¬øNo tienes una cuenta a√∫n? Reg√≠strate gratis.</p>
            <button class="switch__button button switch-btn">REGISTRARME</button>
        </div>
    </div>

</div>

<script src="{% static 'js/login.js' %}"></script>

<script>
// TOGGLE MODO OSCURO
const themeToggle = document.getElementById('theme-toggle');
const body = document.body;

// Verificar si hay preferencia guardada
const currentTheme = localStorage.getItem('theme');
if (currentTheme === 'dark') {
    body.classList.add('dark-mode');
    themeToggle.checked = true;
}

// Evento cuando cambia el checkbox
themeToggle.addEventListener('change', function() {
    if (this.checked) {
        body.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
    } else {
        body.classList.remove('dark-mode');
        localStorage.setItem('theme', 'light');
    }
});
</script>


<!-- ---- -->
<!-- Modal de Pol√≠ticas de Privacidad -->
<div id="modalPoliticas" class="modal-politicas">
    <div class="modal-contenido">
        <span class="cerrar-modal">&times;</span>
        <h3>Pol√≠ticas de Privacidad</h3>
        <div class="politicas-texto">
            <p><strong>√öltima actualizaci√≥n:</strong> {% now "d/m/Y" %}</p>
            
            <h4>1. Informaci√≥n que Recopilamos</h4>
            <ul>
                <li>Nombre, apellido, correo electr√≥nico</li>
                <li>Pa√≠s y datos acad√©micos</li>
                <li>Progreso en cursos</li>
            </ul>

            <h4>2. Uso de la Informaci√≥n</h4>
            <ul>
                <li>Gesti√≥n de usuarios y acceso</li>
                <li>Seguimiento acad√©mico</li>
                <li>Comunicaci√≥n educativa</li>
            </ul>

            <h4>3. Protecci√≥n de Datos</h4>
            <ul>
                <li>Contrase√±as encriptadas</li>
                <li>Acceso restringido</li>
                <li>Comunicaciones seguras</li>
            </ul>

            <p><strong>Contacto:</strong> privacidad@ucn.cl</p>
        </div>
        <button class="button" id="aceptarPoliticas">Aceptar</button>
    </div>
</div>

</body>
</html>