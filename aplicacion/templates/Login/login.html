{% load static %}
<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="{% static 'css/login.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@600&display=swap" rel="stylesheet">
</head>

<body>

<!-- Toggle modo oscuro mejorado -->
<div class="theme-toggle-container">
    <span class="theme-label"></span>
    <label class="theme-switch">
        <input type="checkbox" id="theme-toggle">
        <span class="slider">
            <span class="slider-icon sun">‚òÄÔ∏è</span>
            <span class="slider-icon moon">üåô</span>
        </span>
    </label>
</div>

<div class="main">

    <!-- CONTENEDOR REGISTRO -->
    <div class="container a-container" id="a-container">

        <form class="form" id="registro-form" method="POST">
            {% csrf_token %}

            <h2 class="form_title title">Crear cuenta</h2>

            <!-- Mensajes -->
            <div id="messages-container">
                {% if messages %}
                    <ul class="messages">
                        {% for message in messages %}
                            <li class="alert alert-{{ message.tags }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </div>

            <!-- Selecci√≥n de rol -->
            <div class="role-selector">
                <button type="button" id="docente-role-btn" class="role-btn is-active">Docente</button>
                <button type="button" id="estudiante-role-btn" class="role-btn">Estudiante</button>
            </div>

            <!-- CAMPOS COMPARTIDOS -->
            <input class="form__input" type="text" name="nombre" placeholder="Nombre*" required>
            <input class="form__input" type="text" name="apellido" placeholder="Apellido*" required>
            <input class="form__input" type="email" name="email" placeholder="Correo electr√≥nico*" required>

            <!-- SOLO DOCENTE -->
            <div id="campos-docente">
                <input class="form__input" type="text" name="asignatura" placeholder="Asignatura*">
            </div>

            <!-- SOLO ESTUDIANTE -->
            <div id="campos-estudiante" style="display:none;"></div>

            <!-- Pa√≠s -->
            <select class="form__input" name="pais" required>
                <option value="">Selecciona tu pa√≠s</option>
                <option value="CL">Chile</option>
                <option value="AR">Argentina</option>
                <option value="PE">Per√∫</option>
                <option value="BR">Brasil</option>
                <option value="OTRO">Otro</option>
            </select>

            <input class="form__input" type="password" name="password" placeholder="Contrase√±a*" required>

            <button class="form__button button submit" type="submit">CREAR CUENTA</button>
        </form>

    </div>

    <!-- CONTENEDOR LOGIN -->
    <div class="container b-container" id="b-container">

        <form class="form" id="b-form" method="POST" action="{% url 'docente:autenticar' %}">
            {% csrf_token %}

            <h2 class="form_title title">Iniciar sesi√≥n</h2>

            <input class="form__input" type="text" placeholder="Correo electr√≥nico" name="correo" required>
            <input class="form__input" type="password" placeholder="Contrase√±a" name="contrasena" required>

            <label class="form__checkbox-label">
                <input type="checkbox" name="remember_me" class="form__checkbox">
                Recordarme en este dispositivo
            </label>

            <button class="form__button button submit">INGRESAR</button>

            <a class="form__link" href="#">Olvid√© mi contrase√±a</a>
        </form>

    </div>

    <!-- SWITCH -->
    <div class="switch" id="switch-cnt">
        <div class="switch__circle"></div>
        <div class="switch__circle switch__circle--t"></div>

        <div class="switch__container" id="switch-c1">
            <img src="{% static 'img/logo_ucn.jpg' %}" class="logo-ucn">
            <h2 class="switch__title title">Acceder</h2>
            <button class="switch__button button switch-btn">INICIAR SESI√ìN</button>
        </div>

        <div class="switch__container is-hidden" id="switch-c2">
            <img src="{% static 'img/logo_ucn.jpg' %}" class="logo-ucn">
            <h2 class="switch__title title">¬°BIENVENIDO!</h2>
            <p class="switch__description description">¬øNo tienes una cuenta a√∫n? Reg√≠strate gratis.</p>
            <button class="switch__button button switch-btn">REGISTRARME</button>
        </div>
    </div>

</div>

<script>
// CAMBIO DE ROL
document.getElementById("docente-role-btn").addEventListener("click", function() {
    this.classList.add("is-active");
    document.getElementById("estudiante-role-btn").classList.remove("is-active");

    document.getElementById("campos-docente").style.display = "block";
    document.getElementById("campos-estudiante").style.display = "none";
});

document.getElementById("estudiante-role-btn").addEventListener("click", function() {
    this.classList.add("is-active");
    document.getElementById("docente-role-btn").classList.remove("is-active");

    document.getElementById("campos-docente").style.display = "none";
    document.getElementById("campos-estudiante").style.display = "block";
});
</script>

</body>
</html>

<script src="{% static 'js/login.js' %}"></script>

<script>
// CAMBIO DE ROL
document.getElementById("docente-role-btn").addEventListener("click", function() {
    this.classList.add("is-active");
    document.getElementById("estudiante-role-btn").classList.remove("is-active");

    document.getElementById("campos-docente").style.display = "block";
    document.getElementById("campos-estudiante").style.display = "none";
});

document.getElementById("estudiante-role-btn").addEventListener("click", function() {
    this.classList.add("is-active");
    document.getElementById("docente-role-btn").classList.remove("is-active");

    document.getElementById("campos-docente").style.display = "none";
    document.getElementById("campos-estudiante").style.display = "block";
});

// TOGGLE MODO OSCURO - CORREGIDO
const themeToggle = document.getElementById('theme-toggle');
const body = document.body;

// Verificar si hay preferencia guardada
const currentTheme = localStorage.getItem('theme');
if (currentTheme === 'dark') {
    body.classList.add('dark-mode');
    themeToggle.checked = true;
}

// Evento cuando cambia el checkbox
themeToggle.addEventListener('change', function() {
    if (this.checked) {
        body.classList.add('dark-mode');
        localStorage.setItem('theme', 'dark');
        console.log('Modo oscuro activado'); // Para debug
    } else {
        body.classList.remove('dark-mode');
        localStorage.setItem('theme', 'light');
        console.log('Modo claro activado'); // Para debug
    }
});
</script>

