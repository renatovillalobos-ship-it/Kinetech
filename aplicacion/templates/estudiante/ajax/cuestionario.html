{% load static %}

<div class="ajax-cuestionario">

    <div class="text-center mb-4">
        <img src="{% static 'img/logo_ucn.jpg' %}" 
             alt="" 
             style="height:80px; border-radius: 50%;" 
             class="mb-2">

        <h2 class="fw-bold text-primary">
            Cuestionario {{ cuestionario_id }}
        </h2>

        <p class="text-muted">
            Responde todas las preguntas antes de enviar.
        </p>
    </div>

    <div class="alert alert-info text-start mb-4 mx-auto" style="max-width:650px;">
        <strong>Instrucciones:</strong> Selecciona una alternativa por pregunta.
    </div>

        <form id="cuestionarioForm"
            method="POST"
            data-url-guardar="{% url 'estudiante:ajax_guardar_respuestas' curso_id cuestionario_id %}"
            data-section="cuest-{{ cuestionario_id }}"
            style="max-width:680px; margin: 0 auto;">

        {% csrf_token %}

        <h4 class="text-start mb-4">
            Total de preguntas: {{ preguntas|length }}
        </h4>

        {% for pregunta in preguntas %}
        <div class="pregunta-card mb-4" data-index="{{ forloop.counter0 }}">

            <div class="d-flex flex-row align-items-center mb-2">
                <span class="badge bg-primary me-2" style="font-size:1.2em;">
                    {{ forloop.counter }}
                </span>
                <h5 class="fw-bold mb-0">{{ pregunta.enunciado }}</h5>
            </div>

            <hr>

            {% for respuesta in pregunta.respuesta_set.all %}
            <div class="form-check mb-2">
                <input class="form-check-input"
                       type="radio"
                       name="pregunta_{{ pregunta.id }}"
                       id="respuesta_{{ respuesta.id }}"
                       value="{{ respuesta.id }}">

                <label class="form-check-label" for="respuesta_{{ respuesta.id }}">
                    {{ respuesta.retro }}
                </label>
            </div>
            {% endfor %}

        </div>
        {% endfor %}

        <div class="d-flex justify-content-end gap-3 mt-4 mb-5">
            <button type="submit" id="btnEnviar" class="btn btn-success btn-lg px-4">
                Enviar respuestas
            </button>
        </div>

    </form>

</div>


