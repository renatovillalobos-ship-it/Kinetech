{% load static %}

<link rel="stylesheet" href="{% static 'css/sidebar_curso.css' %}">

<div class="accordion sidebar-modern" id="sidebarAccordion">

    <!-- 游릱 INSTRUCCIONES -->
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingInstr">
            <button class="accordion-button collapsed sidebar-section"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseInstr">
                游닂 Instrucciones del Curso
                <span class="estado-item" id="estado-instrucciones"></span>
            </button>
        </h2>
        <div id="collapseInstr" class="accordion-collapse collapse show"
             aria-labelledby="headingInstr"
             data-bs-parent="#sidebarAccordion">
            <div class="list-group sidebar-list">
                <a href="#"
                   class="list-group-item sidebar-link cargar-contenido active-link"
                   data-url="{% url 'estudiante:ajax_instrucciones' curso_id %}"
                   data-section="instrucciones">
                    Ver instrucciones
                </a>
            </div>
        </div>
    </div>

    <!-- 游릴 CONOCIMIENTOS PREVIOS (CUESTIONARIOS INICIALES) -->
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingPrevios">
            <button class="accordion-button collapsed sidebar-section"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapsePrevios">
                游 Conocimientos Previos
                <span class="estado-item" id="estado-previos"></span>
            </button>
        </h2>
        <div id="collapsePrevios" class="accordion-collapse collapse"
             aria-labelledby="headingPrevios"
             data-bs-parent="#sidebarAccordion">
            <div class="list-group sidebar-list">
                {% if cuestionarios_iniciales %}
                    {% for c in cuestionarios_iniciales %}
                    <a href="#"
                       class="list-group-item sidebar-link cargar-contenido"
                       data-url="{% url 'estudiante:ajax_cuestionario' curso_id c.id %}"
                       data-section="cuest-{{ c.id }}">
                        Cuestionario Inicial 
                        <span class="estado-item small 
                                    {% if c.id in cuestionarios_respondidos %}completado{% endif %}"
                              id="estado-cuest-{{ c.id }}"></span>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="p-3 text-muted small">No hay cuestionarios iniciales disponibles.</div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- 游린 CASO CL칈NICO -->
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingCaso">
            <button class="accordion-button collapsed sidebar-section"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseCaso">
                游뽘 Caso Cl칤nico
                <span class="estado-item" id="estado-caso"></span>
            </button>
        </h2>

        <div id="collapseCaso" class="accordion-collapse collapse"
             aria-labelledby="headingCaso"
             data-bs-parent="#sidebarAccordion">

            <div class="list-group sidebar-list">
                <a href="#" 
                class="list-group-item sidebar-link cargar-contenido"
                data-url="{% url 'estudiante:ajax_guia_kine' curso_id %}" 
                data-section="Pasos">
                    Pasos para la evaluaci칩n de pacientes
                    <span class="estado-item small" id="estado-pasos"></span>
                </a>

                <a href="#"
                   class="list-group-item sidebar-link cargar-contenido"
                   data-url="{% url  'Caso_Clinico:lista_casos' curso_id %}"
                   data-section="caso">
                    Ver Caso Cl칤nico
                    <span class="estado-item small" id="estado-caso-detalle"></span>
                </a>

            </div>

        </div>
    </div>

    <!-- 游릳 EVALUACIONES FINALES (CUESTIONARIOS FINALES) -->
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingFinales">
            <button class="accordion-button collapsed sidebar-section"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseFinales">
                游닇 Evaluaci칩n Final
                <span class="estado-item" id="estado-finales"></span>
            </button>
        </h2>
        <div id="collapseFinales" class="accordion-collapse collapse"
             aria-labelledby="headingFinales"
             data-bs-parent="#sidebarAccordion">
            <div class="list-group sidebar-list">
                {% if cuestionarios_finales %}
                    {% for c in cuestionarios_finales %}
                    <a href="#"
                       class="list-group-item sidebar-link cargar-contenido"
                       data-url="{% url 'estudiante:ajax_cuestionario' curso_id c.id %}"
                       data-section="cuest-{{ c.id }}">
                        Cuestionario Final
                        <span class="estado-item small 
                                    {% if c.id in cuestionarios_respondidos %}completado{% endif %}"
                              id="estado-cuest-final-{{ c.id }}"></span>
                    </a>
                    {% endfor %}
                {% else %}
                    <div class="p-3 text-muted small">No hay evaluaciones finales disponibles.</div>
                {% endif %}
            </div>
        </div>
    </div>

</div>