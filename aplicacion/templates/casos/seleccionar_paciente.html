<!--<!DOCTYPE html>
<html>
<head>
    <title>Seleccionar Paciente - {{ parte.ParteCuerpo }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .paciente-card {
            border: 2px solid #003366;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            background: white;
            transition: all 0.3s;
            cursor: pointer;
        }
        .paciente-card:hover {
            background: #f0f7ff;
            transform: translateX(10px);
        }
        .btn-continuar {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .volver-btn {
            margin-bottom: 20px;
            display: inline-block;
            color: #003366;
            text-decoration: none;
        }
        .debug-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
            border-left: 4px solid #dc3545;
        }
        .paciente-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">-->
        <!-- SECCIÓN DE DEBUGGING -->
       <!-- <div class="debug-info">
            <h3>Información de Debug:</h3>
            <p><strong>Caso ID:</strong> {{ caso.id }} | <strong>Nombre:</strong> {{ caso.caso }}</p>
            <p><strong>Parte ID:</strong> {{ parte.id }} | <strong>Nombre:</strong> {{ parte.ParteCuerpo }}</p>
            <p><strong>Número de relaciones:</strong> {{ relaciones.count }}</p>
            <p><strong>Relaciones existe?:</strong> {% if relaciones %}Sí{% else %}No{% endif %}</p>
        </div>
        
        <a href="{% url 'Caso_Clinico:detalle_caso' caso.id %}" class="volver-btn">
            <i class="fas fa-arrow-left"></i> Volver a partes del cuerpo
        </a>
        
        <h1>Seleccionar Paciente</h1>
        <p><strong>Caso:</strong> {{ caso.caso }}</p>
        <p><strong>Parte del cuerpo:</strong> {{ parte.ParteCuerpo }}</p>
        
        <h2>Pacientes Disponibles</h2>
        
        {% if relaciones %}
            {% for relacion in relaciones %}-->
            <!-- DEBUG: Mostrar información de cada relación -->
          <!-- <div style="background: #e9ecef; padding: 10px; margin: 5px 0; border-radius: 5px; font-size: 0.9em;">
                Relación ID: {{ relacion.id }} | 
                Paciente ID: {{ relacion.Pacientes.id }} | 
                Nombre: {{ relacion.Pacientes.nombre }}
            </div>
            
            <div class="paciente-card" onclick="window.location='{% url "Caso_Clinico:ver_etapas" caso_id=caso.id parte_id=parte.id paciente_id=relacion.Pacientes.id %}'">
                <div class="paciente-info">
                    <div>
                        <h3>{{ relacion.Pacientes.nombre }}</h3>
                        <p><strong>Edad:</strong> {{ relacion.Pacientes.edad }} años</p>
                        <p><strong>Ocupación:</strong> {{ relacion.Pacientes.ocupacion }}</p>
                        <p><strong>Previsión:</strong> {{ relacion.Pacientes.prevision }}</p>
                        <p><strong>Fecha Nacimiento:</strong> {{ relacion.Pacientes.fecha_nacimiento }}</p>
                    </div>
                    <div>
                        <a href="{% url 'Caso_Clinico:ver_etapas' caso.id parte.id relacion.Pacientes.id %}" class="btn-continuar">
                            <i class="fas fa-play-circle"></i> Comenzar Evaluación
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 10px;">
                <i class="fas fa-user-md fa-3x" style="color: #6c757d; margin-bottom: 15px;"></i>
                <h3>No hay pacientes asignados</h3>
                <p>Esta parte del cuerpo no tiene pacientes asociados.</p>
                
                <div style="margin-top: 20px; text-align: left; max-width: 600px; margin-left: auto; margin-right: auto;">
                    <h4>Pasos para solucionar:</h4>
                    <ol>
                        <li>Verifica que existan pacientes en la base de datos</li>
                        <li>Ve al Admin: <a href="/admin/Caso_Clinico/pacientes/" target="_blank">/admin/Caso_Clinico/pacientes/</a></li>
                        <li>Crea relaciones en: <a href="/admin/Caso_Clinico/partes_paciente/add/" target="_blank">/admin/Caso_Clinico/partes_paciente/add/</a></li>
                        <li>Selecciona:
                            <ul>
                                <li>Parte del cuerpo: {{ parte.ParteCuerpo }} (ID: {{ parte.id }})</li>
                                <li>Un paciente existente</li>
                            </ul>
                        </li>
                    </ol>
                </div>
                
                <div style="margin-top: 30px;">
                    <a href="/admin/Caso_Clinico/pacientes/add/" target="_blank" style="background: #003366; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; margin: 0 10px;">
                        <i class="fas fa-plus-circle"></i> Crear Nuevo Paciente
                    </a>
                    <a href="/admin/Caso_Clinico/partes_paciente/add/" target="_blank" style="background: #28a745; color: white; padding: 10px 20px; border-radius: 5px; text-decoration: none; margin: 0 10px;">
                        <i class="fas fa-link"></i> Relacionar Paciente
                    </a>
                </div>
            </div>
        {% endif %}-->
        
        <!-- Verificar URLs de prueba -->
       <!-- <div style="margin-top: 40px; padding: 20px; background: #f0f7ff; border-radius: 10px;">
            <h4>URLs para probar:</h4>
            <ul>
                <li><a href="{% url 'Caso_Clinico:detalle_caso' caso.id %}">Volver al caso</a></li>
                <li><a href="/admin/Caso_Clinico/partes_paciente/">Ver todas las relaciones (Admin)</a></li>
                <li><a href="/admin/Caso_Clinico/partescuerpo/{{ parte.id }}/change/">Editar esta parte del cuerpo</a></li>
            </ul>
        </div>
    </div>
</body>
</html>-->




<!--ULTIMO ARREGLO-->
<!--<!DOCTYPE html>
<html>
<head>
    <title>Seleccionar Paciente - {{ parte.ParteCuerpo }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ... (Estilos CSS existentes) ... */
        .paciente-card {
            border: 2px solid #003366;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            background: white;
            transition: all 0.3s;
            cursor: pointer;
        }
        .paciente-card:hover {
            background: #f0f7ff;
            transform: translateX(10px);
        }
        .btn-continuar {
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .volver-btn {
            margin-bottom: 20px;
            display: inline-block;
            color: #003366;
            text-decoration: none;
        }
        .debug-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: monospace;
            border-left: 4px solid #dc3545;
        }
        .paciente-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        /* Estilo para el mensaje de No Pacientes */
        .no-pacientes-info {
            text-align: center; 
            padding: 40px; 
            background: #f8f9fa; 
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">-->
       <!--Información de debug--> 
       <!-- <div class="debug-info">
            <h3>Información de Debug:</h3>
            <p><strong>Caso ID:</strong> {{ caso.id }} | <strong>Nombre:</strong> {{ caso.caso }}</p>
            <p><strong>Parte ID:</strong> {{ parte.id }} | <strong>Nombre:</strong> {{ parte.ParteCuerpo }}</p>
            <p><strong>Número de relaciones:</strong> {{ relaciones.count }}</p>
        </div>-->
        
     <!--  <a href="{% url 'Caso_Clinico:detalle_caso' caso.id %}" class="volver-btn">
            <i class="fas fa-arrow-left"></i> Volver a partes del cuerpo
        </a>
        
        <h1>Pacientes</h1>
        <p><strong>Caso:</strong> {{ caso.caso }}</p>
        <p><strong>Parte del cuerpo:</strong> {{ parte.ParteCuerpo }}</p>
        
        <h2>Selecciona el paciente que deseas examinar</h2>
        
        {% if relaciones %}
            {% for relacion in relaciones %}
            
            <div style="background: #e9ecef; padding: 10px; margin: 5px 0; border-radius: 5px; font-size: 0.9em;">
                Relación ID: {{ relacion.id }} | 
                Paciente ID: {{ relacion.Pacientes.id }} | 
                Nombre: {{ relacion.Pacientes.nombre }}
            </div>
            
            <div class="paciente-card" onclick="window.location='{% url "Caso_Clinico:ver_etapas" caso_id=caso.id parte_id=parte.id paciente_id=relacion.Pacientes.id %}'">
                <div class="paciente-info">
                    <div>
                        <h3>{{ relacion.Pacientes.nombre }}</h3>
                        <p><strong>Edad:</strong> {{ relacion.Pacientes.edad }} años</p>
                        <p><strong>Ocupación:</strong> {{ relacion.Pacientes.ocupacion }}</p>
                        <p><strong>Previsión:</strong> {{ relacion.Pacientes.prevision }}</p>
                        <p><strong>Fecha Nacimiento:</strong> {{ relacion.Pacientes.fecha_nacimiento }}</p>
                    </div>
                    <div>
                        <a href="{% url 'Caso_Clinico:ver_etapas' caso.id parte.id relacion.Pacientes.id %}" class="btn-continuar">
                            <i class="fas fa-play-circle"></i> Comenzar Evaluación
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="no-pacientes-info">
                <i class="fas fa-user-slash fa-3x" style="color: #dc3545; margin-bottom: 15px;"></i>
                <h3>No hay pacientes asignados para esta parte del cuerpo.</h3>
                <p>Por favor, contacta a tu docente o administrador para verificar la asignación de pacientes a este caso clínico.</p>
            </div>
        {% endif %}
        
        <div style="margin-top: 40px; padding: 20px; background: #f0f7ff; border-radius: 10px;">
            <h4>Opciones de navegación:</h4>
            <ul>
                <li><a href="{% url 'Caso_Clinico:detalle_caso' caso.id %}">Volver al caso</a></li>
                <li><a href="/admin/Caso_Clinico/partes_paciente/">Ver todas las relaciones (Admin - Docente)</a></li>
            </ul>
        </div>
    </div>
</body>
</html>-->




<!DOCTYPE html>
<html>
<head>
    <title>Seleccionar Paciente - {{ parte.ParteCuerpo }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Source Sans Pro', sans-serif;
            background-color: #f4f6f9;
            color: #333;
        }
        h1, h2, h3 {
            color: #003366; /* Azul Oscuro */
        }
        .paciente-card {
            border: 1px solid #7E9BC0;
            border-left: 5px solid #AC6D33; /* Color de Acento (Terracota) */
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            background: white;
            transition: all 0.3s;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        .paciente-card:hover {
            background: #fff8f5; /* Fondo más suave */
            transform: translateX(5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
        }
        .btn-continuar {
            background: #003366; 
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            font-weight: 600;
            transition: background 0.3s;
        }
        .btn-continuar:hover {
            background: #003366;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .container h1 {
            text-align: center;

        }
        .volver-btn {
            margin-bottom: 25px;
            display: inline-block;
            color: #003366;
            text-decoration: none;
            font-weight: 600;
        }
        .debug-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: 'Source Sans Pro', sans-serif;
            border-left: 4px solid #7E9BC0; /* Azul claro */
            font-size: 0.9em;
            color: #555;
        }
        .paciente-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .paciente-detail p {
            margin: 5px 0;
            color: #555;
        }
        .no-pacientes {
            background: #fef4e6;
            border: 1px solid #AC6D33;
            color: #333;
        }
        .no-pacientes h3 {
            color: #AC6D33;
        }
        .action-link {
            background: #003366;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            margin: 0 10px;
            display: inline-block;
            transition: background 0.3s;
        }
        .action-link:hover {
            background: #001a33;
        }
    </style>
</head>
<body>
    <div class="container">
        <!--INFO DEBUG-->
        <!--<div class="debug-info">
            <h3>Información de Debug:</h3>
            <p><strong>Caso ID:</strong> {{ caso.id }} | <strong>Nombre:</strong> {{ caso.caso }}</p>
            <p><strong>Parte ID:</strong> {{ parte.id }} | <strong>Nombre:</strong> {{ parte.ParteCuerpo }}</p>
        </div>-->
        
        <a href="{% url 'Caso_Clinico:detalle_caso' caso.id %}" class="volver-btn">
            <i class="fas fa-arrow-left"></i> Volver a partes del cuerpo
        </a>
        
        <h1>Seleccionar Paciente</h1>
        <p style="color: #AC6D33; font-weight: 600;">Evaluando: {{ parte.ParteCuerpo }} (Caso: {{ caso.caso }})</p>
        
        <h2>Pacientes Disponibles</h2>
        
        {% if relaciones %}
            {% for relacion in relaciones %}
            
            <div class="paciente-card" onclick="window.location='{% url "Caso_Clinico:ver_etapas" caso_id=caso.id parte_id=parte.id paciente_id=relacion.Pacientes.id %}'">
                <div class="paciente-info">
                    <div class="paciente-detail">
                        <h3><i class="fas fa-user-circle" style="color: #7E9BC0;"></i> {{ relacion.Pacientes.nombre }}</h3>
                        <p><strong><i class="fas fa-calendar-alt"></i> Fecha Nacimiento:</strong> {{ relacion.Pacientes.fecha_nacimiento }}</p>
                        <p><strong><i class="fas fa-chart-line"></i> Previsión:</strong> {{ relacion.Pacientes.prevision }}</p>
                        <p><strong><i class="fas fa-briefcase"></i> Ocupación:</strong> {{ relacion.Pacientes.ocupacion }}</p>
                    </div>
                    <div>
                        <a href="{% url 'Caso_Clinico:ver_etapas' caso.id parte.id relacion.Pacientes.id %}" class="btn-continuar">
                            <i class="fas fa-play-circle"></i> Comenzar Evaluación
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="no-pacientes-info">
                <i class="fas fa-user-slash fa-3x" style="color: #dc3545; margin-bottom: 15px;"></i>
                <h3>No hay pacientes asignados para esta parte del cuerpo.</h3>
                <p>Por favor, contacta a tu docente o administrador para verificar la asignación de pacientes a este caso clínico.</p>
            </div>
        {% endif %}
            
        <!--<div style="margin-top: 40px; padding: 20px; background: #e9f0f6; border-radius: 10px; border: 1px dashed #7E9BC0;">
            <h4>Enlaces Rápidos:</h4>
            <ul>
                <li><a href="{% url 'Caso_Clinico:detalle_caso' caso.id %}" style="color: #003366;">Volver al caso</a></li>
                <li><a href="/admin/Caso_Clinico/partes_paciente/" target="_blank" style="color: #003366;">Ver todas las relaciones (Admin)</a></li>
                <li><a href="/admin/Caso_Clinico/partescuerpo/{{ parte.id }}/change/" target="_blank" style="color: #003366;">Editar esta parte del cuerpo</a></li>
            </ul>
        </div>-->
    </div>
</body>
</html>